# 五人掼蛋记分器 - 交互设计文档

## 游戏术语定义

- **一局游戏**：包含摸牌、皇帝叫牌、轮流出牌、结算分数等环节。每局仅有一个皇帝和一个侍卫（可能是皇帝自己）。
- **一场游戏**：由同一组5位玩家进行的多局游戏集合。一场游戏会累积每一局的得分。

## 1. 游戏开始界面

### 玩家设置
- 界面展示五个文字框，每个代表一个玩家
- 默认名称为"玩家1"、"玩家2"等
- 点击姓名框可修改名字
- 名字长度限制：2~8个字符（1-4个汉字）

### 数据验证
- 系统检查名字是否重复，重复的在名字后添加数字
- 检查名字是否为空，空白替换为默认名字

### 开始游戏
- 输入完成后，点击"开始游戏"按钮进入主游戏界面
- 转入第一局游戏设置

## 2. 主游戏界面

### 界面布局
```
+--------------------------------+
|  局数: #3                      |
|  张三 李四  王五 赵六  钱七     |
|  +120 -40 +80   -90   -70     |
+-------------↓------------------+
|                                |
| 👑 🛡️          🃏            |
|               (点击选择)        |
+--------------------------------+
|  名次排序(拖拽调整):            |
|  1. 王五                       |
|  2. 张三                       |
|  3. 李四                       |
|  4. 赵六                       |
|  5. 钱七                       |
+--------------------------------+
|  [重置本局]    [计算得分]      |
+--------------------------------+
```

### 顶部区域 - 游戏信息
- 显示当前局数（如"局数: #3"）
- 显示所有玩家的累积总分（如"张三+120 李四-40..."）
- 下面有个向下的箭头，点击可以展开每局的历史记录，再次点击可以收起来

### 中央区域 - 角色与叫牌
- 左侧显示可拖拽的皇冠(👑)和盾牌(🛡️)图标，提示（拖动到玩家名字旁边）
- 中央显示当前叫牌，默认为小王(🃏)
- 叫牌下方提示"(点击选择)"

### 底部区域 - 排名与操作
- 显示"名次排序(拖拽调整):"提示文字
- 玩家排名列表，从1到5依次展示
- 每行显示排名、玩家名字
- 底部显示"重置本局"和"计算得分"按钮

## 3. 交互细节

### 角色标记交互

**拖拽操作**
- 用户可拖动皇冠和盾牌图标到任何玩家名字上
- 拖动时图标半透明跟随手指移动
- 放置时有轻微的"吸附"效果，并恢复图标不透明度

**修改与取消**
- 已放置的图标可再次拖动到其他玩家，表示修改身份。拖动图标时，不能影响当前的排序
- 要取消某个身份标记，将图标拖回左侧原位
- 一个玩家可同时拥有皇冠和盾牌

### 叫牌选择交互

**选择面板**
- 点击中央叫牌区域，弹出叫牌选择面板
- 面板以网格形式展示所有扑克牌
- 牌按花色分组：黑桃、红桃、方块、梅花，最后是小王
- 每张牌显示清晰的花色和数字

**选择操作**
- 点击任意牌直接选中并关闭选择面板
- 选中的牌以大尺寸显示在中央区域
- 可随时再次点击中央叫牌重新选择

### 排名设置交互

**拖拽排序**
- 使用拖拽组件来简单实现
- 玩家列表项可上下拖动调整顺序
- 拖动名字时，如果有角色标记在，则带着角色标记一起拖动
- 拖动时列表项半透明，其他项自动调整位置
- 放置后自动更新所有排名标签（头游至末游）
- 拖动时有轻微震动反馈，提升操作体验

**显示内容**
- 每个列表项显示：排名数字、玩家名字和排名术语
- 若玩家已被标记为皇帝或侍卫，在名字后显示对应图标

### 操作按钮交互

**重置本局**
- 点击后将当前局的所有设置恢复初始状态：
  - 移除所有角色标记
  - 叫牌重置为小王
  - 排名重置为初始顺序
- 点击时有确认提示："确定要重置本局数据吗？"

**计算得分**
- 系统检查必要信息是否完整：
  - 皇帝是否已标记
  - 叫牌是否已选择
  - 侍卫是否已标记（或确认为"皇帝自己"）
- 若信息不完整，按钮呈禁用状态
- 信息完整时点击显示确认对话框

## 4. 确认对话框

### 内容与布局
```
请确认游戏信息

叫牌：红桃7

排名：
头游： 王五      +30
二游： 张三 👑    -20
三游： 李四 🛡️    -20
四游： 赵六      -20
末游： 钱七      +30

[返回游戏]    [确认计算]
```

### 显示内容
- 顶部显示"请确认游戏信息"标题
- 显示当前选择的叫牌
- 列表显示每位玩家的排名、名字、角色标记和预计得分变化
- 得分增加显示为绿色，减少显示为红色

### 操作选项
- "返回游戏"按钮：关闭对话框，返回主游戏界面继续编辑
- "确认计算"按钮：确认得分计算，结束当前局，更新总分并准备新一局

## 5. 历史记录界面

### 内容布局
- 顶部显示当前总分和局数信息
- 中部以列表形式展示每局游戏记录：
  - 局数
  - 叫牌
  - 皇帝和侍卫是谁
  - 每位玩家的名次和得分变化

### 视图选择
- 提供列表视图和图表视图两种模式
- 图表视图显示每位玩家分数的变化趋势线

### 操作按钮
- "返回游戏"：返回主游戏界面继续当前游戏
- "结算并结束"：结束当前场游戏，展示最终得分排名

## 6. 游戏结束界面

### 内容布局
- 显示"游戏结束"标题
- 显示总局数和游戏时长
- 以排行榜形式展示每位玩家的最终得分和排名
- 可选展示每位玩家的角色统计（担任皇帝/侍卫次数等）

### 操作按钮
- "新游戏"：使用相同玩家开始新一场游戏
- "返回首页"：返回到玩家设置界面

## 7. 交互反馈与状态

### 视觉反馈
- 拖拽操作时提供适当的视觉反馈
- 操作成功后有轻微的动画或色彩变化确认
- 错误操作时提供明确的提示信息

### 数据验证
- 实时验证数据输入和操作的合法性
- 在关键步骤（如计算得分前）进行完整性检查
- 提供清晰的错误提示和修正建议

### 数据保存
- 自动保存当前游戏状态，防止意外关闭导致数据丢失
- 提供游戏恢复功能，可从上次中断处继续

## 8. 适配考虑

### 屏幕适配
- 支持不同尺寸的移动设备屏幕
- 大屏设备（平板）优化显示更多信息
- 小屏设备保持核心功能易于操作

### 操作适配
- 优化触摸操作体验，确保拖拽区域足够大
- 考虑单手操作便利性，重要按钮放在易触达区域
- 考虑是否需要横屏模式支持

---

本文档详细描述了五人掼蛋记分器的交互设计，包括界面布局、操作流程和交互细节。设计专注于提供简洁直观的用户体验，让玩家能够在实际牌局中快速记录信息并计算得分。